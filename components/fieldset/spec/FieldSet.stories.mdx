import { Meta, Preview, Props, Story } from '@not-govuk/docs-components';
import { Input } from '@not-govuk/input';
import { Label } from '@not-govuk/label';
import { VisuallyHidden } from '@not-govuk/visually-hidden';
import { FieldSet } from '../src/FieldSet';
import readMe from '../README.md';

<Meta
  title="FieldSet"
  component={ FieldSet }
  parameters={ {
    chromatic: { viewports: [640, 480] },
    description: 'A set of form fields.',
    jest: ['FieldSet'],
    notes: readMe
  } }
/>

# FieldSet

Use the fieldset component to group related form inputs.

<Preview withToolbar>
  <Story name="FieldSet">
    <FieldSet legend="My fieldset">Content</FieldSet>
  </Story>
</Preview>

<Props of={ FieldSet } />

## When to use this component

Use the fieldset component when you need to show a relationship between multiple
form inputs. For example, you may need to group a set of text inputs into a
single fieldset when [asking for an address].

<Preview>
  <Story name="Standard">
    <FieldSet legend={<h1 className="govuk-heading-l">What is your address?</h1>}>
      <div class="govuk-form-group">
        <Label>Building and street <VisuallyHidden>line 2 of 2</VisuallyHidden></Label>
        <Input
          name="address-line1"
          autoComplete="address-line1"
        />
      </div>
      <div class="govuk-form-group">
        <Label><VisuallyHidden>Building and street line 2 of 2</VisuallyHidden></Label>
        <Input
          name="address-line2"
          autoComplete="address-line2"
        />
      </div>
      <div class="govuk-form-group">
        <Label>Town or city</Label>
        <Input
          name="address-town"
          autoComplete="address-town"
          className="govuk-!-width-two-thirds"
        />
      </div>
      <div class="govuk-form-group">
        <Label>County</Label>
        <Input
          name="address-county"
          autoComplete="address-county"
          className="govuk-!-width-two-thirds"
        />
      </div>
      <div class="govuk-form-group">
        <Label>Postcode</Label>
        <Input
          name="address-postcode"
          autoComplete="address-postcode"
          width={10}
        />
      </div>
    </FieldSet>
  </Story>
</Preview>

If you’re using the examples or macros for radios, checkboxes or date input, the
fieldset will already be included.


## How it works

The first element inside a fieldset must be a `legend` which describes the group
of inputs. This could be a question, such as ‘What is your current address?’ or
a statement like ‘Personal details’.

If you’re asking just [one question per page] as recommended, you can set the
contents of the `#legend#` as the page heading, as shown in the example below.
This is good practice as it means that users of screen readers will only hear
the contents once.

Read more about [why and how to set legends as headings].

<Preview>
  <Story name="Legend as page heading">
    <FieldSet legend={<h1 className="govuk-heading-l">Legend as page heading</h1>}>
    </FieldSet>
  </Story>
</Preview>

On [question pages] containing a group of inputs, including the question as the
legend helps users of screen readers to understand that the inputs are all
related to that question.

Include any general help text which is important for filling in the form and
cannot be written as hint text in the legend, but try to keep it as concise as
possible.


[asking for an address]: https://design-system.service.gov.uk/patterns/addresses
[one question per page]: https://design-system.service.gov.uk/patterns/question-pages/#start-by-asking-one-question-per-page
[why and how to set legends as headings]: https://design-system.service.gov.uk/get-started/labels-legends-headings
[question pages]: https://design-system.service.gov.uk/patterns/question-pages
