import { Fragment } from 'react';
import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { Tag } from '@not-govuk/tag';
import { Table } from '@not-govuk/table';
import { Tabs } from '../src/Tabs';
import readMe from '../README.md';

<Meta
  title="Tabs"
  component={ Tabs }
  parameters={ {
    chromatic: { viewports: [640, 480] },
    description: 'A component that lets users navigate between related sections of content, displaying one section at a time.',
    jest: ['Tabs'],
    notes: readMe
  } }
/>

# Tabs

<p><Tag text="Experimental" /></p>

This component is currently experimental because [more research] is needed to validate it.

The tabs component lets users navigate between related sections of content, displaying one section at a time.

<Preview withToolbar>
  <Story name="Tabs">
    <Tabs
      items={[
        {
          label: "Past day",
          id: "past-day",
          content: (<Fragment>
            <h2>Past day</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '3',
                  closed: '0'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '1',
                  closed: '0'
                },
                {
                  manager: 'Rita Patel',
                  opened: '2',
                  closed: '0'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past week",
          id: "past-week",
          content: (<Fragment>
            <h2>Past week</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '24',
                  closed: '18'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '16',
                  closed: '20'
                },
                {
                  manager: 'Rita Patel',
                  opened: '24',
                  closed: '27'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past month",
          id: "past-month",
          content: (<Fragment>
            <h2>Past month</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '98',
                  closed: '95'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '122',
                  closed: '131'
                },
                {
                  manager: 'Rita Patel',
                  opened: '126',
                  closed: '142'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past year",
          id: "past-year",
          content: (<Fragment>
            <h2>Past year</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '1380',
                  closed: '1472'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '1129',
                  closed: '1083'
                },
                {
                  manager: 'Rita Patel',
                  opened: '1539',
                  closed: '1265'
                },
              ]}
            />
          </Fragment>)
        }
      ]}
    />
  </Story>
</Preview>

<Props of={ Tabs } />


## When to use this component

Tabs can be a helpful way of letting users quickly switch between related information if:

- your content can be usefully separated into clearly labelled sections
- the first section is more relevant than the others for most users
- users will not need to view all the sections at once

Tabs can work well for people who use a service regularly, for example, users of a caseworking system. Their need to perform tasks quickly may be greater than their need for simplicity of first-time use.


## When not to use this component

Do not use the tabs component if the total amount of content the tabs contain will make the page slow to load. For this reason, do not use the tabs component as a form of page navigation.

Tabs hide content from users and not everyone will notice them or understand how they work.

Do not use tabs if your users might need to:

- read through all of the content in order, for example, to understand a step-by-step process
- compare information in different tabs - having to memorise the information and switch backwards and forwards can be frustrating and difficult

Test your content without tabs first. Consider if it’s better to:

- simplify and reduce the amount of content
- split the content across multiple pages
- keep the content on a single page, separated by headings
- use a table of contents to let users navigate quickly to specific sections of content


## Tabs, accordion and details

Tabs, [accordions], and [details] all hide sections of content which a user can choose to reveal.

Consider using tabs instead of an accordion if users do not need to view more than one section at a time.

You should also take into account the number of sections of content. Tabs are arranged horizontally, so cannot fit as many sections as accordions, which display vertically.

Tabs may work better for users who need to switch quickly between 2 sections.

Accordions push other sections down the page when they open, but tabs do not move which makes it easier to switch.

Consider using tabs instead of the details component if there are multiple related sections of content. The details component might be better if you only have 1 or 2 sections of content. The details component is less visually prominent than tabs, so tends to work better for content which is not as important to users.


## How it works

<Preview>
  <Story name="Standard">
    <Tabs
      items={[
        {
          label: "Past day",
          id: "past-day",
          content: (<Fragment>
            <h2>Past day</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '3',
                  closed: '0'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '1',
                  closed: '0'
                },
                {
                  manager: 'Rita Patel',
                  opened: '2',
                  closed: '0'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past week",
          id: "past-week",
          content: (<Fragment>
            <h2>Past week</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '24',
                  closed: '18'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '16',
                  closed: '20'
                },
                {
                  manager: 'Rita Patel',
                  opened: '24',
                  closed: '27'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past month",
          id: "past-month",
          content: (<Fragment>
            <h2>Past month</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '98',
                  closed: '95'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '122',
                  closed: '131'
                },
                {
                  manager: 'Rita Patel',
                  opened: '126',
                  closed: '142'
                },
              ]}
            />
          </Fragment>)
        },
        {
          label: "Past year",
          id: "past-year",
          content: (<Fragment>
            <h2>Past year</h2>
            <Table
              keys={['manager', 'opened', 'closed']}
              headings={{
                manager: 'Case manager',
                opened: 'Cases opened',
                closed: 'Cases closed'
              }}
              data={[
                {
                  manager: 'David Francis',
                  opened: '1380',
                  closed: '1472'
                },
                {
                  manager: 'Paul Farmer',
                  opened: '1129',
                  closed: '1083'
                },
                {
                  manager: 'Rita Patel',
                  opened: '1539',
                  closed: '1265'
                },
              ]}
            />
          </Fragment>)
        }
      ]}
    />
  </Story>
</Preview>

The tabs component uses JavaScript. When JavaScript is not available, users will see the tabbed content on a single page, in order from first to last, with a table of contents that links to each of the sections.

This is also how the component currently behaves on small screens, though more research is needed on this.


### Use clear labels

Tabs hide content, so the tab labels need to make it very clear what they link to, otherwise users will not know if they need to click on them.

If you struggle to come up with clear labels, it might be because the way you’ve separated the content is not clear.


### Order the tabs according to user needs

The first tab should be the most commonly-needed section. Arrange the other tabs in the order that makes most sense for your users.


### Do not disable tabs

Disabling elements is normally confusing for users. If there is no content for a tab, either remove the tab or, if that would be confusing for your users, explain why there is no content when the tab is selected.


### Avoid tabs that wrap over more than one line

If you use too many tabs or they have long labels then they may wrap over more than one line. This makes it harder for users to see the connection between the selected tab and its content.


## Research and testing

This component is experimental because it has not yet been tried in research with users.

The design, code and guidance here are based on recommendations from [Inclusive Components] and the [Nielsen Norman Group] as well as user research findings and examples of tabs in the following services:

- Manage bereavement support payment (DWP)
- Support for check your state pension (DWP)
- Access to work integrated system (DWP)
- Bank holidays (GDS)
- Universal Credit (DWP)
- Criminal Justice Services (CPP)
- Judiciary UI internal systems (HMCTS)
- Rural Payments (Defra)


### Next steps

User research is needed to confirm:

- which types of services tabs work best in
- that this approach to tabs is the best option for screen reader users and sighted keyboard users
- how this component should behave on small screen sizes

[more research]: #next-steps
[Inclusive Components]: https://inclusive-components.design/tabbed-interfaces/
[Nielsen Norman Group]: https://www.nngroup.com/articles/tabs-used-right/
