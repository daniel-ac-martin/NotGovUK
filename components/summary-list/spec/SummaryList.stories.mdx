import { Meta, Preview, Props, Story } from '@storybook/addon-docs';
import { Fragment } from 'react';
import { A } from '@not-govuk/link';
import { SummaryCard } from '@not-govuk/summary-card';
import { VisuallyHidden } from '@not-govuk/visually-hidden';
import { SummaryList } from '../src/SummaryList';
import readMe from '../README.md';

<Meta
  title="Summary list"
  component={ SummaryList }
  parameters={ {
    chromatic: { viewports: [640, 480] },
    description: 'A component to summarise information, for example, a user’s responses at the end of a form.',
    jest: ['SummaryList'],
    notes: readMe
  } }
/>

# Summary list

Use a summary list to summarise information, for example, a user’s responses at
the end of a form.

<Preview withToolbar>
  <Story name="SummaryList">
    <SummaryList
      items={[
        {
          name: 'Name',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> name</VisuallyHidden></Fragment>) } ],
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> date of birth</VisuallyHidden></Fragment>) } ],
          children: '5 January 1978'
        },
        {
          name: 'Address',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> address</VisuallyHidden></Fragment>) } ],
          children: (<Fragment>72 Guild Street<br />London<br />SE23 6FH</Fragment>)
        },
        {
          name: 'Contact details',
          actions: [
            { href: '#', children: (<Fragment>Add<VisuallyHidden> contact details</VisuallyHidden></Fragment>) },
            { href: '#', children: (<Fragment>Change<VisuallyHidden> contact details</VisuallyHidden></Fragment>) }
          ],
          children: (<Fragment><p class="govuk-body">07700 900457</p><p class="govuk-body">sarah.phillips@example.com</p></Fragment>)
        },
      ]}
    />
  </Story>
</Preview>

<Props of={ SummaryList } />


## When to use this component

Use a summary list to show information as a list of key facts.

You can use it to display metadata like ‘Last updated’ with a date like ‘22 June
2018’, or to summarise a user’s responses at the end of a form like the [check
answers pattern].

[Summary cards are a variant within this component]. You can use summary cards
to show multiple summary lists that describe the same type of thing, such as
people. You can also add card actions that apply to the entire summary list.


## When not to use this component

The summary list uses the description list (`<dl>`) HTML element, so only use it
to present information that has a key and at least one value.

Do not use it for tabular data or a simple list of information or tasks, like a
[Task list component]. For those use a `<table>`, `<ul>` or `<ol>`.


## How it works

Each row of a summary list is made up of a:

- ‘key’ that’s a description or label of a piece of information, like “Name”
- ‘value’ which is the piece of information itself, such as “John Smith”

You can show a single or multiple summary lists on a page. If you’re showing
multiple summary lists on a page, you can add structure by using headings or
summary cards.

<Preview>
  <Story name="Standard">
    <SummaryList
      items={[
        {
          name: 'Name',
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          children: '5 January 1978'
        },
        {
          name: 'Address',
          children: (<Fragment>72 Guild Street<br />London<br />SE23 6FH</Fragment>)
        },
        {
          name: 'Contact details',
          children: (<Fragment><p class="govuk-body">07700 900457</p><p class="govuk-body">sarah.phillips@example.com</p></Fragment>)
        },
      ]}
    />
  </Story>
</Preview>


### Adding actions to each row

You can add ‘row actions’ to a summary list. For example, you can help users go
back and edit an answer by adding a ‘change’ link.

When navigating visually, the borders above and below each row help to show
which row action is tied to which piece of information.

Assistive technology users, including those who use a screen reader, might hear
a row action link out of context and might not know what it will do. To give
more context, add visually hidden text to the links. This means a screen reader
user will hear the row action and the ‘key’ label for the information it will
affect, like ‘Change name’ or ‘Change date of birth’.

If a user decides to go back to a previous answer through a card or row action,
make sure information they’ve already entered is pre-populated.

<Preview>
  <Story name="Actions">
    <SummaryList
      items={[
        {
          name: 'Name',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> name</VisuallyHidden></Fragment>) } ],
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> date of birth</VisuallyHidden></Fragment>) } ],
          children: '5 January 1978'
        },
        {
          name: 'Address',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> address</VisuallyHidden></Fragment>) } ],
          children: (<Fragment>72 Guild Street<br />London<br />SE23 6FH</Fragment>)
        },
        {
          name: 'Contact details',
          actions: [
            { href: '#', children: (<Fragment>Add<VisuallyHidden> contact details</VisuallyHidden></Fragment>) },
            { href: '#', children: (<Fragment>Change<VisuallyHidden> contact details</VisuallyHidden></Fragment>) }
          ],
          children: (<Fragment><p class="govuk-body">07700 900457</p><p class="govuk-body">sarah.phillips@example.com</p></Fragment>)
        },
      ]}
    />
  </Story>
</Preview>


#### Showing rows with and without actions

If you’re showing a mix of rows (where some rows include actions and some do
not), add the `govuk-summary-list__row--no-actions` modifier class to the rows
without actions. This is to ensure the bottom border is drawn correctly in some
browsers.

<Preview>
  <Story name="Mixed actions">
    <SummaryList
      items={[
        {
          name: 'Name',
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> date of birth</VisuallyHidden></Fragment>) } ],
          children: '5 January 1978'
        },
        {
          name: 'Address',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> address</VisuallyHidden></Fragment>) } ],
          children: (<Fragment>72 Guild Street<br />London<br />SE23 6FH</Fragment>)
        },
        {
          name: 'Contact details',
          actions: [
            { href: '#', children: (<Fragment>Add<VisuallyHidden> contact details</VisuallyHidden></Fragment>) },
            { href: '#', children: (<Fragment>Change<VisuallyHidden> contact details</VisuallyHidden></Fragment>) }
          ],
          children: (<Fragment><p class="govuk-body">07700 900457</p><p class="govuk-body">sarah.phillips@example.com</p></Fragment>)
        },
      ]}
    />
  </Story>
</Preview>


### Removing the borders

The summary list includes separating borders to help users by joining the
information on each row and its action together.

Think carefully before you remove row borders. Borders help many users find and
read information that’s laid out in rows, especially users who zoom in on pages
or use assistive technologies to magnify their screen.

If your summary list does not have any actions, you can choose to remove the
separating borders with the `govuk-summary-list--no-border` class.

<Preview>
  <Story name="No borders">
    <SummaryList
      classModifiers="no-border"
      items={[
        {
          name: 'Name',
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          children: '5 January 1978'
        },
        {
          name: 'Address',
          children: (<Fragment>72 Guild Street<br />London<br />SE23 6FH</Fragment>)
        },
        {
          name: 'Contact details',
          children: (<Fragment><p class="govuk-body">07700 900457</p><p class="govuk-body">sarah.phillips@example.com</p></Fragment>)
        },
      ]}
    />
  </Story>
</Preview>

To remove borders on a single row, use the `govuk-summary-list__row--no-border`
class.

### Showing missing information

In some contexts, you might need to show rows that have missing information.
This can happen when:

- a user returns to an incomplete journey
- you’ve added or changed the questions in a service.

Show a link to the appropriate question page in the `value` column so the user
can enter the missing information, instead of showing a ‘change’ link on that
row.

<Preview>
  <Story name="Missing info">
    <SummaryList
      items={[
        {
          name: 'Name',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> name</VisuallyHidden></Fragment>) } ],
          children: 'Sarah Philips'
        },
        {
          name: 'Date of birth',
          actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> date of birth</VisuallyHidden></Fragment>) } ],
          children: '5 January 1978'
        },
        {
          name: 'Contact information',
          children: (<A href="#">Enter contact information</A>)
        },
        {
          name: 'Contact details',
          children: (<A href="#">Enter contact details</A>)
        },
      ]}
    />
  </Story>
</Preview>


<h2 id="summary-cards">Summary cards</h2>

If you’re showing multiple summary lists on a page, you can show each list
within a summary card. This lets you visually separate each summary list and
give each a title and some actions.

Use summary cards when you need to show:

- multiple summary lists that all describe the same type of thing, such as
  people
- actions that will apply to all the items in a list

Summary cards are often used in case working systems to help users quickly view
a set of information and related actions.

Do not use summary cards if you only need to show a small amount of related
information. Use summary lists instead, and structure them with headings if
needed.

If you’re showing summary cards at the end of a longer journey, you might want
to familiarise the user with them earlier on — such as when the user reviews
individual sections.


### Card titles

Use the summary card’s header area to give each summary list a title.

Each title must be unique and help identify what the summary list describes. For
example, this could be the name of a specific person, organisation or
professional qualification.

Try to keep titles short and relevant. You can use one or two important values
in the summary list — such as the first and last name of a person.

<Preview>
  <Story name="Cards">
    <SummaryCard title="Lead tenant">
      <SummaryList
        items={[
          {
            name: 'Age',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> age</VisuallyHidden></Fragment>) } ],
            children: '38'
          },
          {
            name: 'Nationality',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> nationality</VisuallyHidden></Fragment>) } ],
            children: 'UK national resident in UK'
          },
          {
            name: 'Working situation',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> working situation</VisuallyHidden></Fragment>) } ],
            children: 'Part time – less than 30 hours a week'
          }
        ]}
      />
    </SummaryCard>
    <SummaryCard title="Person 2">
      <SummaryList
        items={[
          {
            name: 'Details known',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> whether details are known</VisuallyHidden></Fragment>) } ],
            children: 'Yes'
          },
          {
            name: 'Relationship to lead tenant',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> relationship to tenant</VisuallyHidden></Fragment>) } ],
            children: 'Partner'
          },
          {
            name: 'Age',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> age</VisuallyHidden></Fragment>) } ],
            children: '42'
          },
          {
            name: 'Working situation',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> working situation</VisuallyHidden></Fragment>) } ],
            children: 'Unable to work because of long-term sickness or disability'
          }
        ]}
      />
    </SummaryCard>
    <SummaryCard title="Person 3">
      <SummaryList
        items={[
          {
            name: 'Details known',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> whether details are known</VisuallyHidden></Fragment>) } ],
            children: 'Yes'
          },
          {
            name: 'Relationship to lead tenant',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> relationship to tenant</VisuallyHidden></Fragment>) } ],
            children: 'Child'
          },
          {
            name: 'Age',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> age</VisuallyHidden></Fragment>) } ],
            children: '7'
          },
          {
            name: 'Working situation',
            actions: [ { href: '#', children: (<Fragment>Change<VisuallyHidden> working situation</VisuallyHidden></Fragment>) } ],
            children: 'Child under 16'
          }
        ]}
      />
    </SummaryCard>
  </Story>
</Preview>


### Adding card actions

You can add card actions in the header, which will be shown after the summary
card’s title.

For example, if you have multiple rows with “change” actions that all take the
user to the same place, you can show a single “change” card action instead. This
helps avoid repeating the same row action on every row.

Card actions are shown in bold text to make them visually distinct from row
actions — and help alert the user that the card action will affect the entire
summary card.

Write link text for card actions to tell the user what the card action will do
and that it will apply to the entire summary card. It should also be as short as
possible, usually 2 words.

Example card actions include:

- Remove tenant
- Edit qualification
- Update issue
- Approve application
- Cancel order

Keep it short and do not add more than 2 to 3 actions in a header.

If a card action cannot easily be undone or might have serious consequences,
consider adding a warning or asking the user for confirmation.

<Preview>
  <Story name="Cards with actions">
    <SummaryCard
      title="University of Gloucestershire"
      actions={[
        { href: '#', children: (<Fragment>Delete choice<VisuallyHidden> of University of Gloucestershire</VisuallyHidden></Fragment>) },
        { href: '#', children: (<Fragment>Withdraw<VisuallyHidden> from University of Gloucestershire</VisuallyHidden></Fragment>) }
      ]}
    >
      <SummaryList
        items={[
          {
            name: 'Course',
            children: (<Fragment>English (3DMD)<br />PGCE with QTS full time</Fragment>)
          },
          {
            name: 'Location',
            children: (<Fragment>School name<br />Road, City, SW1 1AA</Fragment>)
          }
        ]}
      />
    </SummaryCard>
    <SummaryCard
      title="University of Bristol"
      actions={[
        { href: '#', children: (<Fragment>Delete choice<VisuallyHidden> of University of Bristol</VisuallyHidden></Fragment>) },
        { href: '#', children: (<Fragment>Withdraw<VisuallyHidden> from University of Bristol</VisuallyHidden></Fragment>) }
      ]}
    >
      <SummaryList
        items={[
          {
            name: 'Course',
            children: (<Fragment>English (Q3X1)<br />PGCE with QTS full time</Fragment>)
          },
          {
            name: 'Location',
            children: (<Fragment>School name<br />Road, City, SW2 1AA</Fragment>)
          }
        ]}
      />
    </SummaryCard>
  </Story>
</Preview>


## Research on this component

This component was developed and tested by the Government Digital Service as
part of the [check answers pattern].

The Department for Education contributed the summary card. It’s being used in
some of their services, such as:

- [apply for teacher training], used by the general public
- [register trainee teachers], used by people that work for training providers

The summary card is also used in services run by other departments, such us:

- manage supervisions (Ministry of Justice)
- submit social housing lettings and sales data (Department for Levelling Up,
  Housing & Communities)


### Next steps

We still want to learn more about when this component works well.

If you use this component in your service, we’d like to hear about how you use
the summary list and summary card, as well as any research findings you might
have.


[check answers pattern]: https://design-system.service.gov.uk/patterns/check-answers/
[Summary cards are a variant within this component]: #summary-cards
[Task list component]: https://design-system.service.gov.uk/components/task-list/
[check answers pattern]: https://design-system.service.gov.uk/patterns/check-answers/
[apply for teacher training]: https://www.gov.uk/apply-for-teacher-training
[register trainee teachers]: https://www.register-trainee-teachers.service.gov.uk/
