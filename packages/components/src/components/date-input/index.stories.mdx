import { Meta, Preview, Props, Story } from "@storybook/addon-docs/blocks";
import { boolean, text } from "@storybook/addon-knobs";
import { DateInput } from '../../';
import readMe from './README.md';

<Meta
  title="Components/Date input"
  component={DateInput}
  parameters={{
    jest: ['date-input'],
    notes: readMe
  }}
/>

# Date input

Use the date input component to help users enter a memorable date or one they can easily look up.

<Preview withToolbar>
  <Story name="Date input">
    <DateInput
      className={text('className')}
      disabled={boolean('disabled', false)}
      error={text('error')}
      hint={text('hint', 'For example, 12 11 2007')}
      id={text('id')}
      label={(<h1>{text('label', 'When was your passport issued?')}</h1>)}
      name={text('name', 'passport-issued')}
    />
  </Story>
</Preview>

<Props of={DateInput} />


## When to use this component

Use the date input component when you’re asking users for a date they’ll already know, or can look up without using a calendar.


## When not to use this component

Do not use the date input component if users are unlikely to know the exact date of the event you’re asking about.

Read more about how to ask users for dates.


## How it works

The date input component consists of 3 fields to let users enter a day, month and year.

The 3 date fields are grouped together in a `<fieldset>` with a `<legend>` that describes them, as shown in the examples on this page. This is usually a question, like ‘What is your date of birth?’.

If you’re asking one question per page, you can set the contents of the `<legend>` as the page heading. This is good practice as it means that users of screen readers will only hear the contents once.

Read more about why and how to set legends as headings.

<Preview>
  <Story name="Standard">
    <DateInput
      label={<h1>When was your passport issued?</h1>}
      name="passport-issued"
      hint="For example, 12 11 2007"
    />
  </Story>
</Preview>

Never automatically tab users between the fields of the date input because this can be confusing and may clash with normal keyboard controls.


### Use the autocomplete attribute for a date of birth

Use the autocomplete attribute on the date input component when you’re asking for a date of birth. This lets browsers autofill the information on a user’s behalf if they’ve entered it previously.

To do this, set the autocomplete prop to `bday`. See how to do this in the code snippet in the following example.

<Preview>
  <Story name="Auto-complete">
    <DateInput
      label={<h1>What is your date of birth?</h1>}
      name="dob"
      hint="For example, 31 3 1980"
      autoComplete="dbay"
    />
  </Story>
</Preview>

If you are working in production you’ll need to do this to meet [WCAG 2.1 Level AA].

You will not normally need to use the `autoComplete` attribute in prototypes, as users will not generally be using their own devices.


### Error messages

Error messages should be styled like this:

<Preview>
  <Story name="Errors">
    <DateInput
      label={<h1>When was your passport issued?</h1>}
      name="passport-issued"
      hint="For example, 12 11 2007"
      error="The date your passport was issued must be in the past"
    />
  </Story>
</Preview>

Make sure errors follow the guidance in error message and have specific error messages for specific error states.

Check the entire date, not the day, month and year separately.

Avoid assuming what is wrong with the date. For example, if a user enters ‘31 2 2016’, the day may be right and the month may be wrong. An error message that mentions February may be confusing if they meant to enter ‘1’.


#### If nothing is entered

Say ‘Enter [whatever it is]’.
For example, ‘Enter your date of birth’.


#### If an incomplete date is entered and you know what is missing

Say ‘[whatever it is] must include a [whatever is missing]’.
For example, ‘Date of birth must include a month’ or ‘Date of birth must include a day and month’.


#### If an incomplete date is entered and you do not know what is missing

Say ‘Enter [whatever it is] and include a day, month and year’.
For example, ‘Enter your date of birth and include a day, month and year’.


#### If the date entered is not a real one

Say ‘Enter a real [whatever it is]’.
For example, ‘Enter a real date of birth’.


#### If the date is in the future when it needs to be in the past

Say ‘[whatever it is] must be in the past’.
For example, ‘Date of birth must be in the past’.


#### If the date is in the future when it needs to be today or in the past

Say ‘[whatever it is] must be today or in the past’.
For example, ‘Date of birth must be today or in the past’.


#### If the date is in the past when it needs to be in the future

Say ‘[whatever it is] must be in the future’.
For example, ‘The date your course ends must be in the future’.


#### If the date is in the past when it needs to be today or in the future

Say ‘[whatever it is] must be today or in the future’.
For example, ‘The date your course ends must be today or in the future’.


#### If the date must be the same as or after another date

Say ‘[whatever it is] must be the same as or after [date and optional description]’.
For example, ‘The date your course ends must be the same as or after 1 September 2017 when you started the course’.


#### If the date must be after another date

Say ‘[whatever it is] must be after [date and optional description]’.
For example, ‘The day your course ends must be after 1 September 2017’.


#### If the date must be the same as or before another date

Say ‘[whatever it is] must be the same as or before [date and optional description]’.
For example, ‘The date of Gordon’s last exam must be the same as or before 31 August 2017 when they left school’.


#### If the date must be before another date

Say ‘[whatever it is] must be before [date and optional description]’.
For example, ‘The date of Gordon’s last exam must be the same as or before 31 August 2017’.


#### If the date must be between two dates

Say ‘[whatever it is] must be between [date] and [date and optional description]’.
For example, ‘The date your contract started must be between 1 September 2017 and 30 September 2017 when you were self-employed’.


## Research on this component

More research is needed to determine the extent to which users struggle to enter months as numbers, and whether allowing them to enter months as text is helpful.


[WCAG 2.1 Level AA]: https://www.w3.org/WAI/WCAG21/Understanding/identify-input-purpose.html